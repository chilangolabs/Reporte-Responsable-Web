<!DOCTYPE html>
<html lang="es-MX">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Reporte Responsable</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="./assets/css/styles.css" rel="stylesheet">
</head>
<body>
  <section>
    <div class="container">
      <div class="row">
        <div class="col-12">
          <h1>Reporte Responsable</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-12 my-4">
          <form>
            <div class="form-row">
              <div class="form-group col-md-4">
                <div class="form-group">
                  <label for="contact" class="col-form-label">Nombre Completo del Contacto:</label>
                  <input id="contact" name="contacto" type="text" class="form-control" placeholder="Nombre Apellido" maxlength="30" required>
                </div>
              </div>
              <div class="form-group col-md-4">
                <div class="form-group">
                  <label for="phone" class="col-form-label">Teléfono de contacto:</label>
                  <input id="phone" name="telefono" type="tel" class="form-control" placeholder="5512345678" maxlength="10" required>
                </div>
              </div>
              <div class="form-group col-md-4">
                <div class="form-group">
                  <label for="email" class="col-form-label">Correo electrónico:</label>
                  <input id="email" name="correo" type="email" class="form-control" placeholder="nombre@example.com">
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-12">
                <label for="calle" class="col-form-label">Calle:</label>
                <input id="calle" name="calle" type="text" class="form-control" placeholder="Calle" required>
              </div>
              <div class="form-group col-md-3">
                <label for="noExterior" class="col-form-label">Número exterior:</label>
                <input id="noExterior" name="numero" type="text" class="form-control" placeholder="00" required>
              </div>
              <div class="form-group col-md-3">
                <label for="colonia" class="col-form-label">Colonia</label>
                <input id="colonia" name="colonia" type="text" class="form-control" placeholder="Colonia" required>
              </div>
              <div class="form-group col-md-3">
                <label for="municipio" class="col-form-label">Delegación o Municipio</label>
                <input id="municipio" name="municipio" type="text" class="form-control" placeholder="Municipio" required>
              </div>
              <div class="form-group col-md-3">
                <label for="zipCode" class="col-form-label">Código postal:</label>
                <input id="zipCode" name="cp" type="text" class="form-control" maxlength="5" minlength="5" placeholder="00000" required>
              </div>
              <div class="form-group col-md-4">
                <label for="tipo" class="col-form-label">Tipo de inmueble:</label>
                <select id="tipo" name="tipo" class="form-control">
                  <option value="hospital">Hospital</option>
                  <option value="escuela">Escuela</option>
                  <option value="instanciaInfantil">Instancia infantil</option>
                  <option value="departamentos">Departamentos</option>
                  <option value="casa">Casa</option>
                  <option value="comercio">Comercio</option>
                  <option value="oficinasPublicas">Oficinas públicas</option>
                  <option value="oficinasPrivadas">Oficinas privadas</option>
                  <option value="industria">Industria</option>
                  <option value="centroDeReunion">Centro de reunión</option>
                  <option value="estacionamiento">Estacionamiento</option>
                  <option value="recreativo">Recreativo</option>
                  <option value="otro">Otro</option>
                </select>
              </div>
              <div class="form-group col-md-4">
                <label for="niveles" class="col-form-label">¿Cuantos pisos tiene el inmueble?</label>
                <input id="niveles" name="niveles" type="number" class="form-control" min="1" max="60" required>
              </div>
              <div class="form-group col-md-4">
                <label for="residentes" class="col-form-label">¿Cuántas personas ocupan el inmueble? (Aprox)</label>
                <input id="residentes" name="residentes" type="number" class="form-control" min="1" max="5000" required>
              </div>
              <div class="form-group col-md-4">
                <label for="afectaciones" class="col-form-label">¿Cuál es la principal afectación en el inmueble?</label>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="checkbox" name="afectaciones" id="afectaciones" class="form-check-input" value="derrumbeTotal">
                    Derrumbe Total
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="checkbox" name="afectaciones" id="afectaciones" class="form-check-input" value="derrumbeParcial">
                    Derrumbe Parcial
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="checkbox" name="afectaciones" id="afectaciones" class="form-check-input" value="grietasMuros">
                    Grietas en Muros y Acabados
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="checkbox" name="afectaciones" id="afectaciones" class="form-check-input" value="grietasTrabes">
                    Grietas en Trabes y Columnas
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="checkbox" name="afectaciones" id="afectaciones" class="form-check-input" value="asentamiento">
                    Asentamiento o Hundimiento
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="checkbox" name="afectaciones" id="afectaciones" class="form-check-input" value="danoVidrios">
                    Daños en vidrios y cancelerías
                  </label>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="ubicacion" class="col-form-label">Ubicación de daños del inmueble</label>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="radio" name="ubicacion" id="ubicacion" class="form-check-input" value="interior">
                    Interior
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="radio" name="ubicacion" id="ubicacion" class="form-check-input" value="exterior">
                    Exterior
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="radio" name="ubicacion" id="ubicacion" class="form-check-input" value="ambas">
                    Ambas
                  </label>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label for="evacuado" class="col-form-label">¿Ya fue evacuado?</label>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="radio" name="evacuado" id="evacuado" class="form-check-input" value="si">
                    Si
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="radio" name="evacuado" id="evacuado" class="form-check-input" value="no">
                    No
                  </label>
                </div>
                <div class="form-check">
                  <label class="form-check-label">
                    <input type="radio" name="evacuado" id="evacuado" class="form-check-input" value="parcialmente">
                    Parcialmente
                  </label>
                </div>
              </div>
              <div class="form-group col-12">
                <label for="observation">Observaciones:</label>
                <textarea name="observaciones" id="observation" class="form-control" placeholder="Observaciones" rows="3" required></textarea>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="file" class="col-form-label">Fotografía de Fachada</label>
                <input type="file" name="file" id="file" class="form-control" accept="image/*" required>
              </div>
              <div class="form-group col-md-6">
                <label for="file2" class="col-form-label">Fotografías de Elementos Dañados</label>
                <input type="file" name="file2" id="file2" class="form-control" accept="image/*">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-12">
                <label for="map">Ubica la zona:</label>
                <div id="map" class="map"></div>
              </div>
            </div>
            <div class="form-row">
              <button type="submit" class="btn btn-primary">Enviar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <footer class="bg-dark text-white">
    <div class="container">
      <div class="row pt-2">
        <div class="col-6 col-sm-8">
          <div class="row">
            <div class="col-12">
              <h6></h6>
            </div>
          </div>
        </div>
        <div class="col-6 col-sm-4">
          <div class="row">
            <div class="col-12">
              <h6>Redes sociales</h6>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <ul class="list-inline social-networks">
                <li class="list-inline-item">
                  <a href="">
                    <i class="fa fa-stack fa-facebook"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a href="">
                    <i class="fa fa-stack fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a href="">
                    <i class="fa fa-stack fa-linkedin"></i>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <p>Diseñado y programado con ❤️ por Chilango Labs ®️</p>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
  <script>
    var marker;

    function initMap() {
      if (navigator.geolocation) {
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 19.432608, lng: -99.133209},
          zoom: 10
        });

        navigator.geolocation.getCurrentPosition(function (position) {
          var geolocate = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

          marker = new google.maps.Marker({
            map,
            position: geolocate,
            animation: google.maps.Animation.DROP,
            draggable: true
          });

          map.setZoom(16);
          map.panTo(marker.position);
        });
      } else {
        document.getElementById('map').innerHTML('Tu navegador es muy antiguo')
      }
    }

    document.getElementsByTagName('form')[0].addEventListener('submit', function (e) {
      e.preventDefault();

      var formData = new FormData(this);
      formData.append('latitud', marker.position.lat());
      formData.append('longitud', marker.position.lng());

      var xhr = new XMLHttpRequest();

      xhr.addEventListener('error', function (e) {
        alert('Ops! Ocurrió un error');
      });

      xhr.addEventListener('load', function (e) {
        document.getElementsByTagName('form')[0].reset();
        alert('Gracias por enviar tu reporte será atendido a la brevedad');
      });

      xhr.open('POST', 'https://criptexfc.com/tlalolin/admin/app/addMensaje', true);
      xhr.send(formData);
    }, false);
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA4EGqTMat8krNot2Bm04FUUZ8uSHDk5ro&callback=initMap" async defer></script>
</body>
</html>
